jQuery(document).ready(function(a){"use strict";function e(){"use strcit";var b=a(".woocommerce-main-image > img.wp-post-image, div.product div.images > img");b.length>0&&(c=b.attr("src")),a("body").find("form:not(.in_loop).cart").each(function(){a(this).init_yith_wapo_totals(),a(this).find(".variations select").change()}),a("body").find(".ywapo_option_description").each(function(){var b=a(this).data("tooltip");b&&f(a(this),b)}),a(".ywapo_input_container_color .wp-color-picker").wpColorPicker({change:function(b,c){var d=a(this).closest(".ywapo_input_container_color"),e=d.find("input.ywapo_input_color");e.val(c.color.toString()),e.change()},clear:function(){var b=a(this).closest(".ywapo_input_container_color"),c=b.find("input.ywapo_input_color");c.val(""),c.change()}}),a(".ywapo_datepicker").each(function(){a(this).datepicker({dateFormat:yith_wapo_general.date_format})});var d=a(".fusion-body select.ywapo_input");d.length>0&&(d.addClass("avada-select"),d.wrap('<div class="avada-select-parent"></div>').after('<div class="select-arrow">&#xe61f;</div>'))}function f(b,c){var d=a('<span class="yith_wccl_tooltip"></span>'),e=yith_wapo_general.tooltip_pos+" "+yith_wapo_general.tooltip_ani;d.addClass(e),b.append(d.html("<span>"+c+"</span>"))}if("undefined"==typeof yith_wapo_general)return!1;var b=!1,c="",d=null;a.fn.init_yith_wapo_totals=function(){function e(b){var c=a(".yith_wapo_groups_container");if("undefined"!=typeof c){var d=c.find("input.ywapo_input.ywapo_price_percentage, select.ywapo_input option.ywapo_price_percentage, textarea.ywapo_input.ywapo_price_percentage"),e=0;d.each(function(){var f=a(this);if("undefined"!=typeof f.data("pricetype")&&"fixed"!=f.data("pricetype")){var g=f.closest(".ywapo_input_container"),h=f.val();a.ajax({url:yith_wapo_general.wc_ajax_url.toString().replace("%%endpoint%%","yith_wapo_update_variation_price"),type:"POST",data:{variation_id:b.variation_id,variation_price:b.display_price,type_id:f.data("typeid"),option_index:f.data("index"),option_value:h},beforeSend:function(){0==e&&s(c)},success:function(b){if(!b.error&&""!=b){f.data("price",b),f.attr("data-price",b);var h=G(parseFloat(b));if(g.find("span.amount").html(h),""!=f.text()){var i=f.text().split("+");if(i.length>0){i=i[0]+" + "+h,f.addClass("ywapo_option_price_changed");var j=f.closest(".ywapo_group_container"),k=j.find("select"),l=k.attr("sb");if("undefined"!=typeof l){var m=f.data("index"),n=a(a("#sbOptions_"+l).find("li").get(parseInt(m)+1)).find("a");n.html(i)}}f.html(i)}if(e++,e==d.length){var o=d.closest("form.cart");o.trigger("yith-wapo-product-option-update"),t(c)}}}})}})}}function f(b){var c=h();if(c>0){var d=a(".yith_wapo_groups_container");if("undefined"!=typeof d){var e=d.find("input.ywapo_input.ywapo_price_percentage, select.ywapo_input option.ywapo_price_percentage, textarea.ywapo_input.ywapo_price_percentage");e.each(function(){var e=a(this);if("undefined"!=typeof e.data("pricetype")&&"fixed"!=e.data("pricetype")){var f=e.closest(".ywapo_input_container");i(b,c,e,d,f,!0,!1)}})}}}function g(b){var c=a(".yith_wapo_group_total");if(b.find("div.quantity > input.qty").size())var d=parseFloat(b.find("div.quantity > input.qty").val());else var d=1;var e=F(b,d),c=a(".yith_wapo_group_total"),f=parseFloat(c.data("product-price")),g=a(".yith-wcpb-product-bundled-items");g.length>0&&(f=h());var i=c.find(".yith_wapo_group_product_price_total span.price");if(f>0){var k=G(f*d);i.html(k),i.show()}else i.html(""),i.hide();var l=c.find(".yith_wapo_group_option_total span.price"),m=G(e);l.html(m);var n=0,o=c.find(".yith_wapo_group_final_total span.price");n=f*d+e;var p=G(n);o.html(p),yith_wapo_general.keep_price_shown||0!=e?c.fadeIn():c.fadeOut(),j(e,f),a(document).trigger("yith_wapo_product_price_updated",[f+e])}function h(){return parseFloat(a(".yith-wcpb-wapo-bundle-product-price").val())}function i(b,c,d,e,f,g,h){var i=a(".yith_wapo_group_total").data("product-id");return d.length>0&&(s(e),a.ajax({url:yith_wapo_general.wc_ajax_url.toString().replace("%%endpoint%%","yith_wapo_get_calculated_display_price"),type:"POST",data:{product_id:i,product_price:c,type_id:d.data("typeid"),option_index:d.data("index"),option_value:d.val()},success:function(c){if(c.error||""==c)return 0;d.data("price",c),d.attr("data-price",c);var i=G(parseFloat(c));if(f.find("span.amount").html(i),""!=d.text()){var j=d.text().split("+");if(j.length>0){j=j[0]+" + "+i,d.addClass("ywapo_option_price_changed");var k=d.closest(".ywapo_group_container"),l=k.find("select"),m=l.attr("sb");if("undefined"!=typeof m){var n=d.data("index"),o=a(a("#sbOptions_"+m).find("li").get(parseInt(n)+1)).find("a");o.html(j)}}d.html(j),g&&b.trigger("yith-wapo-product-option-update")}h&&d.trigger("yith-wapo-product-price-changed"),t(e)}})),0}function j(b,c){var d=a(".ywcp_wcp_group_total");if(1==d.length){var e=a("#ywcp_wcp_tr_wapo_option_total"),f=a(".yith_wcp_wapo_add_ons_total span.amount");if(b>0){var g=b+c;d.data("product-price",g),d.attr("data-product-price",g),e.removeClass("ywcp_wapo_total_hided"),f.html(G(b))}else d.data("product-price",c),d.attr("data-product-price",c),e.addClass("ywcp_wapo_total_hided"),f.html(G(0));a(document).trigger("ywcp_calculate_total")}}function k(b,e){var f=b.data("change-featured-image");if(f){var g=a(e),h=a(".woocommerce-main-image > img.wp-post-image, div.product div.images > img"),i=u(g,b),j=g.closest(".ywapo_input_container");if(i&&"labels"==b.data("type")&&!j.hasClass("ywapo_selected"))return;var k=l(b,g,j),n=i&&""!=k&&k!=c&&!b.hasClass("ywapo_conditional_hidden")&&!b.hasClass("ywapo_conditional_variation_hidden");n?(h.removeAttr("srcset"),h.removeAttr("srcsize"),h.attr("src",k),d=b,o(k)):null!=d&&m(h,b)}}function l(a,b,d){var e="",f=b.parents("select").find("option:selected");if("undefined"!=typeof f&&1==f.length&&"undefined"!=typeof f.data("image-url")&&f.data("image-url").length>0)e=f.data("image-url");else{var g=d.find(".ywapo_single_option_image");1==g.length?e=g.attr("src"):(g=a.find(".ywapo_product_option_image > img"),e=1==g.length?g.attr("src"):c)}return e}function m(a,b){null!=d&&b.data("id")==d.data("id")&&(n(a),d=null)}function n(a){a.removeAttr("srcset"),a.removeAttr("srcsize"),a.attr("src",c),o(c)}function o(b){if("undefined"!=typeof yith_magnifier_options){var c=a(".yith_magnifier_zoom"),d=a(".yith_magnifier_zoom img");c.attr("href",b),d.attr("src",b),d.attr("srcset",b),d.attr("src-orig",b);var e=a(".images");e.data("yith_magnifier")&&e.yith_magnifier("destroy"),e.yith_magnifier(yith_magnifier_options)}}function p(b){var c=!0;return b.find(".ywapo_group_container").each(function(){var b=a(this);if("undefined"!=typeof b&&!b.hasClass("ywapo_conditional_hidden")&&!b.hasClass("ywapo_conditional_variation_hidden")){var d=b.data("type"),e="1"==b.data("requested"),f="1"==b.data("requested-all-options"),g=f,h=b.data("max-item-selected");switch(d){case"text":case"textarea":case"number":case"file":case"date":case"range":case"color":if("1"==b.data("max-input-values-required")||"1"==b.data("min-input-values-required"))e=!0,g=!1;else{var i=b.find("input.ywapo_input, textarea.ywapo_input, input.ywapo_input_color"),j=0;i.each(function(){var b=a(this).val();""!=b&&j++}),h>0&&h==j?g=!0:i.each(function(){if(f){if(""==a(this).val()&&"required"==a(this).attr("required"))return e=!0,void(g=!1);if(""==a(this).val())return void(g=!1)}else if(""!=a(this).val())return void(g=!0)})}break;case"checkbox":if(e){var k=b.find(".ywapo_input").length,l=b.find(".ywapo_input:checked").length;g=f?k>0&&(k==l||h>0&&k==h):k>0&&l>0}else b.find(".ywapo_input").each(function(){if(!a(this).is(":checked")&&"required"==a(this).attr("required"))return e=!0,void(g=!1)});break;case"select":g=""!=b.find("select.ywapo_input").val();break;case"labels":case"multiple_labels":g=b.find(".ywapo_input_container_labels.ywapo_selected").length>0;break;case"radio":g=!1,b.find("input.ywapo_input").each(function(){if(a(this).is(":checked"))return void(g=!0)})}if(e&&!g)return c=!1,void b.addClass("ywapo_miss_required");b.removeClass("ywapo_miss_required")}}),c||a("html, body").animate({scrollTop:a("#yith_wapo_groups_container").offset().top},2e3),c}function q(b){var c=a(b).closest(".ywapo_group_container"),d=c.data("max-item-selected");if(d>0){var e=c.data("type");switch(e){case"checkbox":var f=c.find('input[type="checkbox"].ywapo_input'),g=c.find('input[type="checkbox"]:checked.ywapo_input');g.length==d?f.each(function(){a(this).is(":checked")||a(this).attr("disabled","disabled")}):f.each(function(){a(this).removeAttr("disabled")});break;case"number":var f=c.find('input[type="number"].ywapo_input'),g=0;f.each(function(){var b=a(this).val();""!=b&&g++}),g==d?f.each(function(){var b=a(this).val();""==b&&a(this).attr("disabled","disabled")}):f.each(function(){a(this).removeAttr("disabled")})}}}function r(b){var c=a(b).closest(".ywapo_group_container"),d=c.data("type");if("number"==d){var e=c.find('input[type="number"].ywapo_input'),f=0;e.each(function(){var b=a(this).val();""!=b&&(f+=parseFloat(b))});var g=c.data("max-input-values-amount");g>0&&(f>g?(c.data("max-input-values-required","1"),c.attr("data-max-input-values-required","1")):(c.data("max-input-values-required","0"),c.attr("data-max-input-values-required","0")));var h=c.data("min-input-values-amount");h>0&&(f<h?(c.data("min-input-values-required","1"),c.attr("data-min-input-values-required","1")):(c.data("min-input-values-required","0"),c.attr("data-min-input-values-required","0")))}}function s(a){"use strcit";a.block({message:"",overlayCSS:{backgroundColor:"#fff",opacity:.6,cursor:"wait"}})}function t(a){"use strcit";a.unblock()}function u(b,c){var d=c.data("type"),e=!1;if("select"==d)e=""!=b.val();else if("radio"==d)e=b.is(":checked");else switch(d){case"checkbox":c.find('input[type="checkbox"].ywapo_input').each(function(){if(a(this).is(":checked"))return void(e=!0)});break;case"labels":var f=0;c.find('input[type="hidden"].ywapo_input').each(function(){if(""!=a(this).val())return f++,!0}),e=f>0;break;case"text":case"number":case"file":case"color":case"date":case"range":c.find("input.ywapo_input").each(function(){if(""!=a(this).val())return void(e=!0)});break;case"textarea":c.find("textarea.ywapo_input").each(function(){if(""!=a(this).val())return void(e=!0)})}return e&&c.removeClass("ywapo_miss_required"),e}function v(b,c){var d=c.data("type"),e=[];switch(d){case"radio":b.is(":checked")&&(e[0]=b.val());break;case"select":e[0]=b.val();break;case"checkbox":var f=0;c.find('input[type="checkbox"].ywapo_input').each(function(){a(this).is(":checked")&&e.push(f.toString()),f++});break;case"labels":c.find('input[type="hidden"].ywapo_input').each(function(){""!=a(this).val()&&e.push(a(this).val())});break;case"text":case"number":case"file":case"color":case"date":case"range":var f=0;c.find("input.ywapo_input").each(function(){""!=a(this).val()&&e.push(f.toString()),f++});break;case"textarea":var f=0;c.find("textarea.ywapo_input").each(function(){""!=a(this).val()&&e.push(f.toString()),f++})}return e}function w(b,c,d){"use strcit";var e=d.data("id");if("undefined"!=typeof e){var f=v(a(c),d);b.find(".ywapo_group_container").each(function(){var b=a(this).closest(".ywapo_group_container");if("undefined"!=typeof b){var c=b.data("id");if(e!=c){var d=x(b);if(d.length>0){var g=A(d);if(g){if(!b.hasClass("ywapo_conditional_hidden"))return b.addClass("ywapo_conditional_hidden"),C(b),!0}else if("undefined"!=typeof e&&null!=e){var h=y(e.toString(),d);if(h>=0||"option"==h){var i=z(e.toString(),f,d,h);i?(b.removeClass("ywapo_conditional_hidden"),b.addClass("ywapo_conditional_matched"),b.addClass("ywapo_conditional_matched_"+e),b.hasClass("ywapo_conditional_variation_hidden")||B(b)):(b.addClass("ywapo_conditional_hidden"),b.removeClass("ywapo_conditional_matched"),b.removeClass("ywapo_conditional_matched_"+e),C(b))}}}}}})}}function x(a){var b=a.data("condition");if(""!=b){b=b.toString().split(",");for(var c=0;c<b.length;c++)0==b[c].indexOf("option_")&&(b[c]=b[c].replace("option_",""),b[c]=b[c].replace("_",","))}return b}function y(b,c){var d=a.inArray(b,c);if(d==-1)for(var e=0;e<c.length;e++)if(c[e].indexOf(",")>=0){var f=c[e].split(",")[0];if(b==f.toString()){d="option";break}}return d}function z(b,c,d,e){if("option"==e){for(var f=0;f<d.length;f++){var g=d[f];if(g.indexOf(",")>=0){var h=g.split(",")[0],i=g.split(",")[1].toString();if(b==h.toString()&&""!=i){var j=a.inArray(i,c);if(j>=0)return!0}}}return!1}return c.length>0&&c[0]>=0}function A(b){var c=!1;return a(".yith_wapo_groups_container").find(".ywapo_group_container").each(function(){var d=a(this).data("id"),e=y(d,b);if((e>=0||"option"==e)&&a(this).hasClass("ywapo_conditional_hidden"))return void(c=!0)}),c}function B(b){"use strcit";b.find("input, select, textarea").each(function(){a(this).removeAttr("disabled"),a(this).change()})}function C(b){"use strcit";b.find("input, select, textarea").each(function(){a(this).attr("disabled","disabled")});var c=b.data("id"),d=a(".ywapo_conditional_matched_"+c);d.each(function(){var b=a(this);b.addClass("ywapo_conditional_hidden"),C(b)})}function D(c){"use strcit";var d=b?b.variation_id.toString():0;c.find(".ywapo_group_container").each(function(){var b=a(this).closest(".ywapo_group_container");if("undefined"!=typeof b){var c=b.data("id"),e=E(b);if(e.length>0){var f=a.inArray(d,e)>=0;if(f)b.removeClass("ywapo_conditional_variation_hidden"),b.addClass("ywapo_conditional_variation_matched"),b.hasClass("ywapo_conditional_hidden")||B(b);else{b.addClass("ywapo_conditional_variation_hidden"),b.removeClass("ywapo_conditional_variation_matched"),C(b);var g=a(".ywapo_conditional_matched_"+c);g.each(function(){var b=a(this);b.addClass("ywapo_conditional_hidden"),C(b)})}}}})}function E(a){var b=a.data("condition-variations");return""!=b&&(b=b.toString().split(",")),b}function F(b,c){var d=0;return b.find('.ywapo_input:checked, select.ywapo_input option:selected, input[type="text"].ywapo_input, input[type="number"].ywapo_input, input[type="file"].ywapo_input, input[type="color"].ywapo_input, input[type="date"].ywapo_input,input[type="hidden"].ywapo_input ,textarea.ywapo_input').each(function(){var b=a(this),f=(b.closest("form.cart"),c),g=b.closest(".ywapo_group_container");if("undefined"!=typeof g&&!g.hasClass("ywapo_conditional_hidden")&&!g.hasClass("ywapo_conditional_variation_hidden")){var h=g.data("type"),i=g.data("sold-individually");"1"==i&&(f=1);var j=!1;switch(h){case"text":case"textarea":case"number":case"file":case"color":case"date":case"labels":case"multiple_labels":""!=b.val().trim()&&(j=!0);break;default:j=!0}if(j){var l=b.data("price");"undefined"!=typeof l&&l>=0&&(d+=parseFloat(l)*parseFloat(f))}}k(g,this)}),d}function G(a){var b=accounting.formatMoney(a,{symbol:yith_wapo_general.currency_format_symbol,decimal:yith_wapo_general.currency_format_decimal_sep,thousand:yith_wapo_general.currency_format_thousand_sep,precision:yith_wapo_general.currency_format_num_decimals,format:yith_wapo_general.currency_format});return b}a(this).on("change",".yith_wapo_groups_container input, .yith_wapo_groups_container select, .yith_wapo_groups_container textarea, div.quantity > input.qty",function(b){var c=a(this),d=c.closest(".ywapo_group_container");if("undefined"!=typeof c.data("pricetype")&&("calculated_multiplication"==c.data("pricetype")||"calculated_character_count"==c.data("pricetype"))&&""!=c.val()){var e=c.find("form.cart"),f=c.closest(".ywapo_input_container");i(e,1,c,d,f,!1,!0)}a(this).trigger("yith-wapo-product-option-conditional",c),a(this).trigger("yith-wapo-product-option-update"),k(d,a(this).find(":selected"))}),a(this).on("change mouseleave",'.yith_wapo_calculate_quantity input[type="number"]',function(b){var c=0,d=a(this).closest(".ywapo_group_container").find('input[type="number"]');d.each(function(){var b=a(this).val();""!=b&&(c+=parseInt(b))});var e=a(this).closest("form").find('div.quantity > input[name="quantity"]');0==e.closest(".ywcp_component_options_selection_container").length&&(c>0?(e.val(c),e.attr("readonly","readonly")):(e.val(e.attr("min")),e.removeAttr("readonly"))),g(a(this).closest("form.cart"))}),a(this).on("found_variation",function(c,d){if(!a(c.target).hasClass("ywcp_inner_selected_container")&&!a(c.target).hasClass("bundled_item_cart_content")){var f=a(".yith_wapo_group_total"),g=0;if(b=d,"undefined"!=typeof d.display_price)g=d.display_price;else if(a(d.price_html).find(".amount:last").size()){a(".cart");g=a(d.price_html).find(".amount:last").text(),g=G(g)}f.data("product-price",g),f.attr("data-product-price",g),e(d),D(a(this)),a(this).trigger("yith-wapo-product-option-update")}}),a(this).on("hide_variation",function(c){a(c.target).hasClass("ywcp_inner_selected_container")||(b=!1,D(a(this)),a(this).trigger("yith-wapo-product-option-update"))}),a(this).on("yith-wapo-product-option-update yith-wapo-product-price-changed",function(){var b=a(this);g(b)}),a(this).on("click",".ywapo_input_container.ywapo_input_container_labels",function(b){var c=a(this).find('input[type="hidden"]');if(""!=c.val())c.val(""),a(this).removeClass("ywapo_selected");else{var d=a(this).closest(".ywapo_group_container_labels").find(".ywapo_input_container.ywapo_input_container_labels");d.removeClass("ywapo_selected"),d.find('input[type="hidden"]').val(""),a(this).addClass("ywapo_selected"),c.val(c.data("index"))}a(this).trigger("yith-wapo-product-option-conditional",c),a(this).trigger("yith-wapo-product-option-update")}),a(this).on("yith-wapo-product-option-conditional",function(b,c){var d=a(c).closest(".ywapo_group_container");w(a(this),c,d)}),a(this).on("click",".single_add_to_cart_button",function(b){var c=a(this).closest("form.cart");if(yith_wapo_general.do_submit=p(c),!yith_wapo_general.do_submit){var d=c.find("button.single_add_to_cart_button");d.length>0&&d.hasClass("loading")&&d.removeClass("loading")}return yith_wapo_general.do_submit}),a(document).on("yith_ywraq_action_before",function(){return H=a("form.cart"),yith_wapo_general.do_submit=p(H),yith_wapo_general.do_submit}),a(document).on("yith_wcpb_ajax_update_price_request",function(){H=a("form.cart"),f(H),g(H)}),a(this).on("yith-wapo-product-option-conditional",function(a,b){q(b)}),a(this).on("yith-wapo-product-option-conditional",function(a,b){r(b)}),a(document).on("ywmmq_additional_operations",function(){var b=a("form.cart");g(b)});var H=a(this);H.find(".yith_wapo_groups_container input, .yith_wapo_groups_container select, .yith_wapo_groups_container textarea").each(function(){H.trigger("yith-wapo-product-option-conditional",a(this))}),H.trigger("yith-wapo-product-option-update"),g(H)},e(),a(document).on("qv_loader_stop yit_quick_view_loaded flatsome_quickview",function(){e()})});